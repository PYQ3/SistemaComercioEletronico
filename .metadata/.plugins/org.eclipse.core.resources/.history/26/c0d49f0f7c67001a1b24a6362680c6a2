package br.ufpb.vendas;

import java.util.ArrayList;
import java.util.List;
import java.lang.Iterable;

public class SistemaComercioEletronicoList implements SistemaComercioEletronico {
	private List<Cliente> clientes;
	private List<Pedido> pedidos;
	private List<Produto> produtos;
	
	public SistemaComercioEletronicoList() {
		this.clientes = new ArrayList<Cliente>();
		this.produtos = new ArrayList<Produto>();
		this.pedidos = new ArrayList<Pedido>();
	}
	
	
	@Override
	public boolean existeProduto(Produto produto) {
		for(Produto p: this.produtos) {
			if (p.getCodigo().equals(produto.getCodigo())) {
				return true;
			}
		}
		return false;
	}
	
	@Override
	public Produto pesquisaProduto(String codigoProduto) {
		for(Produto p: this.produtos) {
			if (p.getCodigo().equals(codigoProduto)) {
				return p;
			}
		}
		return null;
	}
	
	@Override
	public boolean cadastraProduto(Produto produto) {
		if (existeProduto(produto)) {
			return false;
		} else {
			this.produtos.add(produto);
			return true;
		}
	}
	
	@Override
	public boolean cadastraPedido(Pedido pedido) {
		if (existePedido(pedido)) {
			return false;
		} else {
			this.pedidos.add(pedido);
			return true;
		}
	}
	@Override
	public boolean existePedido(Pedido pedido) {
		for (Pedido p: this.pedidos) {
			if (p.getNumero().equals(pedido.getNumero())) {
				return true;
			}
		}
		return false;
	}
	
	
	@Override
	public boolean cadastraCliente(Cliente cliente) {
		if (existeCliente(cliente)) {
			return false;
		} else {
			this.clientes.add(cliente);
			return true;
		}
	}
	@Override
	public boolean existeCliente(Cliente cliente) {
		for (Cliente c: this.clientes) {
			if (c.getId().equals(cliente.getId())) {
				return true;
			}
		}
		return false;
	}
	
	
	/**
	 * Pesquisa no sistema o cliente com um dado identificador
	 * @param id O identificador do cliente a pesquisar
	 * @return O cliente do sistema que tem um dado identificador (id, e.g. CPF, CNPJ)
	 */
	@Override
	public Cliente pesquisaCliente(String id) {
		try {
			for (Cliente c : this.clientes) {
				if(c.getId() == id) {
					toString();
				}
				
			}
		}catch(Exception e) {
			System.out.println("Cliente não cadastrado");
		}
		return null;
	}
	
	/**
	 * Pesquisa os clientes cujo nome começa com um certo prefixo
	 * @param prefixo O prefixo a pesquisar
	 * @return a lista dos clientes cujo nome começa com certo prefixo
	 */
	@Override
	public List<Cliente> pesquisaClientesComNomeComecandoCom(String prefixo){
		//TODO: Implementar
		return null;  //Implementação temporária
	}
	
	/**
	 * Pesquisa os pedidos que incluem produtos cujo código é passado como parâmetro
	 * @param codigoProduto O código do produto a pesquisar nos itens de pedido
	 * @return a lista dos pedidos que incluem um dado produto.
	 */
	@Override
	public List<Pedido> pesquisaPedidosIncluindoProduto(String codigoProduto){
		ArrayList<Pedido> Pedidos = new ArrayList<Pedido>();
		for (Pedido c: this.pedidos) {
			for (ItemDoPedido b: c.getItens()) {
				if (b.getProduto().getCodigo().equals(codigoProduto)) {
					Pedidos.add(c);
					}
				}
				
			}
		return Pedidos;
	}
	
 	public List<Cliente> getClientes(){
 		return this.clientes;
 	}
	
 	public void setClientes(List<Cliente> clientes) {
 		this.clientes = clientes;
 			
 	}
	
	public List<Cliente> pesquisarClientePeloNome(String nomePesquisa){
		ArrayList<Cliente> clienteAchadoPeloNome = new ArrayList<>();
		for (Cliente c: clientes) {
			if (c.getNome().equals(nomePesquisa)){
				toString();
			}
		}
		return null;
		
		
		
	}
}